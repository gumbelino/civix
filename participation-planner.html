<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>civix - Participation Planner</title>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23E31837'/%3E%3Ctext x='100' y='120' font-family='DM Serif Text, serif' font-size='72' fill='white' text-anchor='middle' font-weight='400'%3Ecvx%3C/text%3E%3C/svg%3E"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Serif+Text&family=DM+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "DM Sans", sans-serif;
        background-color: #ffffff;
        color: #000000;
        min-height: 100vh;
        padding: 40px 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      .header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 48px;
        animation: fadeIn 0.8s ease-in;
      }

      .logo {
        width: 60px;
        height: 60px;
      }

      h1 {
        font-family: "DM Serif Text", serif;
        font-size: 32px;
        font-weight: 400;
        letter-spacing: 1px;
      }

      .inputs-section {
        background: #fafafa;
        padding: 32px;
        border-radius: 2px;
        margin-bottom: 48px;
        animation: fadeIn 1s ease-in;
      }

      .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 24px;
      }

      .input-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .input-group label {
        font-size: 14px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.7;
      }

      .input-group input {
        font-family: "DM Sans", sans-serif;
        font-size: 18px;
        padding: 12px;
        border: 1px solid #e0e0e0;
        border-radius: 2px;
        background: white;
        transition: border-color 0.2s;
      }

      .input-group input:focus {
        outline: none;
        border-color: #E31837;
      }

      .summary {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 32px;
        background: #000000;
        color: white;
        margin-bottom: 48px;
        animation: fadeIn 1.2s ease-in;
      }

      .summary-item {
        text-align: center;
      }

      .summary-label {
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 1px;
        opacity: 0.7;
        margin-bottom: 4px;
      }

      .summary-value {
        font-family: "DM Serif Text", serif;
        font-size: 28px;
        font-weight: 400;
      }

      .summary-value.highlight {
        color: #E31837;
      }

      .tactics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        animation: fadeIn 1.4s ease-in;
      }

      .tactic-card {
        background: white;
        border: 1px solid #e0e0e0;
        padding: 24px;
        transition: all 0.3s ease;
      }

      .tactic-card:hover {
        border-color: #E31837;
        box-shadow: 0 4px 12px rgba(227, 24, 55, 0.1);
      }

      .tactic-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .tactic-name {
        font-family: "DM Serif Text", serif;
        font-size: 20px;
        font-weight: 400;
      }

      .tactic-cost {
        font-size: 14px;
        font-weight: 500;
        color: #E31837;
      }

      .dial-container {
        position: relative;
        margin-bottom: 16px;
      }

      .dial-background {
        width: 100%;
        height: 8px;
        background: #f0f0f0;
        border-radius: 4px;
        position: relative;
        overflow: hidden;
      }

      .dial-fill {
        height: 100%;
        background: linear-gradient(90deg, #E31837 0%, #ff4d6d 100%);
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .dial-slider {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 8px;
        background: transparent;
        outline: none;
        position: absolute;
        top: 0;
        left: 0;
        cursor: pointer;
      }

      .dial-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #E31837;
        cursor: pointer;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .dial-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #E31837;
        cursor: pointer;
        border-radius: 50%;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .tactic-stats {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
        margin-top: 12px;
      }

      .stat {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .stat-label {
        opacity: 0.6;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .stat-value {
        font-weight: 600;
      }

      .optimize-button {
        background: #E31837;
        color: white;
        border: none;
        padding: 12px 24px;
        font-family: "DM Sans", sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .optimize-button:hover {
        background: #c01530;
        box-shadow: 0 4px 12px rgba(227, 24, 55, 0.3);
      }

      .optimize-button:active {
        transform: scale(0.98);
      }

      /* Contact Section */
      .contact-section {
        margin-top: 80px;
        padding: 48px;
        background: #fafafa;
        border-radius: 2px;
      }

      .contact-section h2 {
        font-family: "DM Serif Text", serif;
        font-size: 28px;
        font-weight: 400;
        margin-bottom: 12px;
      }

      .contact-intro {
        font-size: 16px;
        opacity: 0.7;
        margin-bottom: 32px;
      }

      .contact-form {
        max-width: 800px;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .form-group label {
        font-size: 13px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.7;
      }

      .form-group input,
      .form-group textarea {
        font-family: "DM Sans", sans-serif;
        font-size: 16px;
        padding: 12px;
        border: 1px solid #e0e0e0;
        border-radius: 2px;
        background: white;
        transition: border-color 0.2s;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #E31837;
      }

      .form-group textarea {
        resize: vertical;
      }

      .submit-button {
        background: #000000;
        color: white;
        border: none;
        padding: 14px 32px;
        font-family: "DM Sans", sans-serif;
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 8px;
      }

      .submit-button:hover {
        background: #E31837;
        box-shadow: 0 4px 12px rgba(227, 24, 55, 0.3);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        animation: fadeIn 0.3s ease;
      }

      .modal-content {
        background-color: white;
        margin: 5% auto;
        padding: 40px;
        max-width: 700px;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        animation: slideUp 0.3s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-close {
        position: absolute;
        right: 20px;
        top: 20px;
        font-size: 28px;
        font-weight: 300;
        color: #999;
        cursor: pointer;
        transition: color 0.2s;
      }

      .modal-close:hover {
        color: #E31837;
      }

      #modal-title {
        font-family: "DM Serif Text", serif;
        font-size: 28px;
        font-weight: 400;
        margin-bottom: 24px;
      }

      #modal-body {
        font-size: 15px;
        line-height: 1.7;
      }

      #modal-body h3 {
        font-family: "DM Sans", sans-serif;
        font-size: 16px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-top: 24px;
        margin-bottom: 12px;
        color: #E31837;
      }

      #modal-body p {
        margin-bottom: 16px;
        opacity: 1;
      }

      #modal-body ul {
        margin-left: 20px;
        margin-bottom: 16px;
      }

      #modal-body li {
        margin-bottom: 8px;
      }

      .method-stat {
        display: inline-block;
        background: #f0f0f0;
        padding: 4px 12px;
        border-radius: 2px;
        margin-right: 8px;
        margin-bottom: 8px;
        font-weight: 500;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 768px) {
        .header {
          margin-bottom: 32px;
        }

        h1 {
          font-size: 24px;
        }

        .logo {
          width: 48px;
          height: 48px;
        }

        .inputs-section {
          padding: 24px;
        }

        .summary {
          flex-direction: column;
          gap: 16px;
          padding: 20px;
        }

        .summary-value {
          font-size: 24px;
        }

        .tactics-grid {
          grid-template-columns: 1fr;
        }

        .contact-section {
          padding: 24px;
          margin-top: 48px;
        }

        .contact-section h2 {
          font-size: 24px;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .modal-content {
          margin: 10% 20px;
          padding: 24px;
          max-height: 85vh;
        }

        #modal-title {
          font-size: 24px;
          padding-right: 30px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <svg
          class="logo"
          viewBox="0 0 200 200"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="100" cy="100" r="100" fill="#E31837" />
          <text
            x="100"
            y="120"
            font-family="'DM Serif Text', serif"
            font-size="72"
            fill="white"
            text-anchor="middle"
            font-weight="400"
          >
            cvx
          </text>
        </svg>
        <h1>Participation Planner</h1>
      </div>

      <div class="inputs-section">
        <div class="input-grid">
          <div class="input-group">
            <label for="population">Population Size</label>
            <input
              type="number"
              id="population"
              value="100000"
              min="1000"
              step="1000"
            />
          </div>
          <div class="input-group">
            <label for="target">Target Participants</label>
            <input
              type="number"
              id="target"
              value="2000"
              min="10"
              step="10"
            />
          </div>
          <div class="input-group">
            <label for="budget">Budget (CHF)</label>
            <input
              type="number"
              id="budget"
              value="50000"
              min="0"
              step="1000"
            />
          </div>
        </div>
      </div>

      <div class="summary">
        <div class="summary-item">
          <div class="summary-label">Total Reach</div>
          <div class="summary-value" id="total-reach">0</div>
        </div>
        <div class="summary-item">
          <div class="summary-label">Total Cost</div>
          <div class="summary-value highlight" id="total-cost">CHF 0</div>
        </div>
        <div class="summary-item">
          <div class="summary-label">Budget Status</div>
          <div class="summary-value" id="budget-status">0%</div>
        </div>
        <div class="summary-item">
          <button id="optimize-btn" class="optimize-button">
            Optimize Outreach
          </button>
        </div>
      </div>

      <div class="tactics-grid" id="tactics-grid"></div>
      
      <!-- Contact Form Section -->
      <div class="contact-section">
        <h2>Need Help Planning Your Strategy?</h2>
        <p class="contact-intro">Connect with our experts to develop an effective outreach plan for your participatory process.</p>
        
        <form class="contact-form" id="contact-form">
          <div class="form-row">
            <div class="form-group">
              <label for="contact-name">Name *</label>
              <input type="text" id="contact-name" required />
            </div>
            <div class="form-group">
              <label for="contact-email">Email *</label>
              <input type="email" id="contact-email" required />
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="contact-organization">Organization</label>
              <input type="text" id="contact-organization" />
            </div>
            <div class="form-group">
              <label for="contact-phone">Phone</label>
              <input type="tel" id="contact-phone" />
            </div>
          </div>
          
          <div class="form-group">
            <label for="contact-message">Message *</label>
            <textarea id="contact-message" rows="5" required placeholder="Tell us about your participatory process and how we can help..."></textarea>
          </div>
          
          <button type="submit" class="submit-button">Send Message</button>
        </form>
      </div>
      
      <!-- Method Details Modal -->
      <div id="method-modal" class="modal">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h2 id="modal-title"></h2>
          <div id="modal-body"></div>
        </div>
      </div>
    </div>

    <script>
      // Outreach tactics data based on the provided table
      // Using conversion rates and costs from the data
      const tactics = [
        {
          name: "Newsletter",
          key: "newsletter",
          reach: 90000,
          voters: 1134,
          cost: 500, // Low cost estimated
          conversionRate: 1134 / 90000,
          description: "Email newsletters through city communications and organizational mailing lists.",
          details: {
            effectiveness: "E-news was the 3rd most effective outreach method for participation, recruiting 11.4% of signups and 17.4% of voters.",
            representation: "E-news tended to recruit community members who were white, had graduate degrees, and incomes over $200K compared to other methods.",
            cost: "E-news provided a 'free' outreach method. The main overhead cost is for the city communications staff and CRM.",
            bestPractices: [
              "Reach of 90,000 subscribers with approximately 50% open rate",
              "Most effective when PB is the primary focus of the newsletter",
              "Cannot be significantly increased as announcements are limited to once per week"
            ]
          }
        },
        {
          name: "Mail",
          key: "mail",
          reach: 35000,
          voters: 648,
          cost: 18000,
          conversionRate: 648 / 35000,
          description: "Direct mail campaigns sending informational flyers to residents.",
          details: {
            effectiveness: "Direct mail was 4th in effectiveness for participation, recruiting 6.6% of signups and 9.9% of voters.",
            representation: "Direct mail tended to recruit community members who were white, had graduate degrees, and incomes over $200K, similar to e-news.",
            cost: "Direct mail averaged CHF 27.78 per voter. In Evanston, this included design ($2,799), printing ($1,022), and postage ($6,712) for 35,000 residences.",
            bestPractices: [
              "Effective for reaching established residents with stable addresses",
              "More expensive than digital outreach methods",
              "Can be combined with other tactics for better results"
            ]
          }
        },
        {
          name: "Canvass",
          key: "canvass",
          reach: 13000,
          voters: 1384,
          cost: 13315,
          conversionRate: 1384 / 13000,
          description: "Face-to-face outreach at community events, block parties, and door-to-door visits by volunteers.",
          details: {
            effectiveness: "Canvassing was BY FAR the most effective outreach method, recruiting 32.9% of signups and 21.2% of voters. Over 170 face-to-face canvassing events were conducted over 14 months.",
            representation: "Canvassing was the most effective method for reaching traditionally marginalized communities: 17.2% Black/African American, 10.2% Hispanic, and 8.8% Asian participants. It was also best for reaching people with lower educational attainment and lower income levels.",
            cost: "While labor intensive, volunteers donated over CHF 13,300 worth of time (600+ hours at CHF 20/hour). Even if volunteers were paid, canvassing would be cost-effective at CHF 9.62 per vote.",
            bestPractices: [
              "54 trained outreach volunteers conducted nearly 3 face-to-face sessions per week",
              "Average of 6.9 signups per hour per canvasser",
              "Training and volunteer coordination is essential",
              "Most effective when combined with food, events, and community partnerships",
              "Based on relational organizing techniques"
            ]
          }
        },
        {
          name: "Referrals",
          key: "referrals",
          reach: 5000,
          voters: 903,
          cost: 0,
          conversionRate: 903 / 5000,
          description: "Friend-to-friend referrals where participants invite others through the registration system.",
          details: {
            effectiveness: "Referrals were the 2nd most effective method, recruiting 21.6% of signups and 13.8% of voters. Over 2,200 people were referred, with 700+ registering and 500+ voting.",
            representation: "Referrals fell between canvassing and e-news in recruiting diverse community members by race, education, and income.",
            cost: "Referrals provided a nearly 'free' outreach method. The main overhead cost was staff with moderate IT skills to setup forms, CRM, and email blasts.",
            bestPractices: [
              "When participants register online, ask them to provide emails of others who might participate",
              "Automate follow-up emails to referred contacts",
              "Approximately 1 in 3 referred people registered to participate"
            ]
          }
        },
        {
          name: "Text",
          key: "text",
          reach: 30000,
          voters: 143,
          cost: 2000,
          conversionRate: 143 / 30000,
          description: "Text message campaigns to registered voter lists.",
          details: {
            effectiveness: "Text blasts recruited 1.8% of signups and 2.2% of voters. In Evanston, 2 text blasts were sent to 31,488 numbers on the citywide registered voters list.",
            representation: "Similar to direct mail, text blasts tended to recruit white participants with graduate degrees and higher income.",
            cost: "Text blasts averaged CHF 13.98 per voter. Total cost was CHF 2,000 for the campaign.",
            bestPractices: [
              "More effective for reminders to people already in the database",
              "Limited impact when used for broad outreach to cold contacts",
              "Consider combining with other personalized outreach methods"
            ]
          }
        },
        {
          name: "Social Media",
          key: "social",
          reach: 12500,
          voters: 93,
          cost: 25000,
          conversionRate: 93 / 12500,
          description: "Digital advertising and social media campaigns across multiple platforms.",
          details: {
            effectiveness: "Digital marketing had negligible impact, accounting for only 1.1% of signups and was the least effective major outreach method.",
            representation: "Social media reached primarily already-engaged residents rather than underrepresented communities.",
            cost: "The most expensive method at CHF 268.82 per voter. Total spend: CHF 25,000 on ad buys across Facebook, Google, Instagram, LinkedIn, NextDoor, and YouTube (not including video production and consulting fees).",
            bestPractices: [
              "Track 'impressions' carefully - they can be misleading",
              "Consider reallocating budget to face-to-face outreach",
              "May be more effective for awareness than for driving action",
              "Organic social media posts by community members may be more effective than paid ads"
            ]
          }
        },
      ];

      // State management
      let state = {
        population: 100000,
        target: 2000,
        budget: 50000,
        allocations: {},
      };

      // Initialize allocations
      tactics.forEach((tactic) => {
        state.allocations[tactic.key] = 0;
      });

      function handleSliderChange(e) {
        const tacticKey = e.target.dataset.tactic;
        const value = parseInt(e.target.value);
        state.allocations[tacticKey] = value;
        renderTactics();
        updateSummary();
      }

      function updateInputListeners() {
        document
          .getElementById("population")
          .addEventListener("input", (e) => {
            state.population = parseInt(e.target.value) || 0;
            renderTactics();
            updateSummary();
          });

        document.getElementById("target").addEventListener("input", (e) => {
          state.target = parseInt(e.target.value) || 0;
          updateSummary();
        });

        document.getElementById("budget").addEventListener("input", (e) => {
          state.budget = parseInt(e.target.value) || 0;
          updateSummary();
        });
      }

      function updateSummary() {
        let totalParticipants = 0;
        let totalCost = 0;

        tactics.forEach((tactic) => {
          const allocation = state.allocations[tactic.key];
          const participants = allocation * tactic.conversionRate;
          const cost = allocation * (tactic.cost / tactic.reach);
          totalParticipants += participants;
          totalCost += cost;
        });

        const budgetPercentage = state.budget > 0 
          ? Math.round((totalCost / state.budget) * 100) 
          : 0;

        document.getElementById("total-reach").textContent =
          Math.round(totalParticipants).toLocaleString();
        document.getElementById("total-cost").textContent =
          "CHF " + Math.round(totalCost).toLocaleString();
        
        const budgetStatus = document.getElementById("budget-status");
        budgetStatus.textContent = budgetPercentage + "%";
        
        // Color code budget status
        if (budgetPercentage > 100) {
          budgetStatus.style.color = "#E31837";
        } else if (budgetPercentage > 80) {
          budgetStatus.style.color = "#ff9800";
        } else {
          budgetStatus.style.color = "#4caf50";
        }
      }

      // Optimize outreach allocations
      function optimizeOutreach() {
        const target = state.target;
        const budget = state.budget;
        
        if (target <= 0) {
          alert("Please enter a target number of participants.");
          return;
        }
        
        // Sort tactics by cost-effectiveness (participants per CHF)
        const sortedTactics = [...tactics].sort((a, b) => {
          const effA = a.conversionRate / (a.cost / a.reach);
          const effB = b.conversionRate / (b.cost / b.reach);
          return effB - effA; // Higher is better
        });
        
        // Reset allocations
        tactics.forEach(tactic => {
          state.allocations[tactic.key] = 0;
        });
        
        let remainingTarget = target;
        let remainingBudget = budget;
        
        // Allocate to tactics in order of cost-effectiveness
        for (const tactic of sortedTactics) {
          if (remainingTarget <= 0) break;
          
          // Calculate how much reach we need for this tactic
          const neededParticipants = Math.min(remainingTarget, target * 0.4); // Cap at 40% from single source
          const neededReach = neededParticipants / tactic.conversionRate;
          const cappedReach = Math.min(neededReach, tactic.reach, state.population * 0.5);
          
          const cost = cappedReach * (tactic.cost / tactic.reach);
          
          if (cost <= remainingBudget || tactic.cost === 0) {
            state.allocations[tactic.key] = Math.round(cappedReach);
            const actualParticipants = cappedReach * tactic.conversionRate;
            remainingTarget -= actualParticipants;
            remainingBudget -= cost;
          }
        }
        
        renderTactics();
        updateSummary();
      }
      
      // Show method details modal
      function showMethodDetails(tactic) {
        const modal = document.getElementById("method-modal");
        const title = document.getElementById("modal-title");
        const body = document.getElementById("modal-body");
        
        title.textContent = tactic.name;
        
        if (tactic.details) {
          body.innerHTML = `
            <p>${tactic.description}</p>
            
            <div class="method-stat">Reach: ${tactic.reach.toLocaleString()}</div>
            <div class="method-stat">Conversion: ${(tactic.conversionRate * 100).toFixed(2)}%</div>
            <div class="method-stat">Cost: ${tactic.cost > 0 ? 'CHF ' + tactic.cost.toLocaleString() : 'Free'}</div>
            
            <h3>Effectiveness</h3>
            <p>${tactic.details.effectiveness}</p>
            
            <h3>Representation</h3>
            <p>${tactic.details.representation}</p>
            
            <h3>Cost Analysis</h3>
            <p>${tactic.details.cost}</p>
            
            <h3>Best Practices</h3>
            <ul>
              ${tactic.details.bestPractices.map(practice => `<li>${practice}</li>`).join('')}
            </ul>
          `;
        } else {
          body.innerHTML = `<p>${tactic.description}</p>`;
        }
        
        modal.style.display = "block";
      }
      
      // Modal close handlers
      function setupModal() {
        const modal = document.getElementById("method-modal");
        const closeBtn = document.querySelector(".modal-close");
        
        closeBtn.onclick = function() {
          modal.style.display = "none";
        }
        
        window.onclick = function(event) {
          if (event.target == modal) {
            modal.style.display = "none";
          }
        }
      }
      
      // Contact form handler
      function setupContactForm() {
        const form = document.getElementById("contact-form");
        
        form.addEventListener("submit", function(e) {
          e.preventDefault();
          
          const name = document.getElementById("contact-name").value;
          const email = document.getElementById("contact-email").value;
          const organization = document.getElementById("contact-organization").value;
          const phone = document.getElementById("contact-phone").value;
          const message = document.getElementById("contact-message").value;
          
          // In a real application, this would send to a backend
          console.log("Contact form submitted:", { name, email, organization, phone, message });
          
          alert("Thank you for your message! Our team will be in touch shortly.");
          form.reset();
        });
      }
      
      // Update renderTactics to add click handler
      function renderTactics() {
        const grid = document.getElementById("tactics-grid");
        grid.innerHTML = "";

        tactics.forEach((tactic) => {
          const card = document.createElement("div");
          card.className = "tactic-card";
          card.style.cursor = "pointer";
          card.addEventListener("click", () => showMethodDetails(tactic));

          const allocation = state.allocations[tactic.key];
          const participants = Math.round(allocation * tactic.conversionRate);
          const cost = Math.round(allocation * (tactic.cost / tactic.reach));
          const percentage = (allocation / state.population) * 100;

          card.innerHTML = `
            <div class="tactic-header">
              <div class="tactic-name">${tactic.name}</div>
              <div class="tactic-cost">${cost > 0 ? "CHF " + cost.toLocaleString() : "Free"}</div>
            </div>
            <div class="dial-container">
              <div class="dial-background">
                <div class="dial-fill" style="width: ${percentage}%"></div>
              </div>
              <input
                type="range"
                class="dial-slider"
                min="0"
                max="${state.population}"
                value="${allocation}"
                step="${Math.max(100, Math.round(state.population / 1000))}"
                data-tactic="${tactic.key}"
              />
            </div>
            <div class="tactic-stats">
              <div class="stat">
                <div class="stat-label">Reach</div>
                <div class="stat-value">${allocation.toLocaleString()}</div>
              </div>
              <div class="stat">
                <div class="stat-label">Participants</div>
                <div class="stat-value">${participants.toLocaleString()}</div>
              </div>
              <div class="stat">
                <div class="stat-label">Rate</div>
                <div class="stat-value">${(tactic.conversionRate * 100).toFixed(1)}%</div>
              </div>
            </div>
          `;

          grid.appendChild(card);
        });

        // Add slider listeners (prevent click event from firing on slider)
        document.querySelectorAll(".dial-slider").forEach((slider) => {
          slider.addEventListener("click", (e) => e.stopPropagation());
          slider.addEventListener("input", handleSliderChange);
        });
      }
      
      // Update init to include new setup functions
      function init() {
        renderTactics();
        updateInputListeners();
        updateSummary();
        setupModal();
        setupContactForm();
        
        // Add optimize button listener
        document.getElementById("optimize-btn").addEventListener("click", optimizeOutreach);
      }

      // Initialize on load
      init();
    </script>
  </body>
</html>
